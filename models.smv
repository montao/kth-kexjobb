
MODULE UART
VAR
	state : {idle, receive, transmit};
	mem : array 0 .. 31 of 0 .. 31;
IVAR
-- system inputs
	Rx : array 0 .. 31 of 0 .. 31;
MODULE MEM
VAR
-- main memory
	mem : array 0 .. 31 of 0 .. 31;
	K : 0 .. 254;
	old-K : 0 .. 254;

MODULE main
VAR
-- system state	
--memory : MEM;
	memory : MEM;
	proc : {idle, read, write, write-K};
ASSIGN
	init (proc) := read;
	next (proc) :=
		case
			proc = read : idle;
			TRUE : proc;
		esac;
LTLSPEC G proc != write-K -> memory.old-K = memory.K
